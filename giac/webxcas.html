<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>
    Webxcas
  </title>
    <style>
      .emscripten { padding-right: 0; margin-left: auto; margin-right: auto; display: block; }
      canvas.emscripten { border: 1px solid black; }
      textarea.emscripten { font-family: monospace; width: 80%; }
      div.emscripten { text-align: center; }
    </style>
</head>
<body>
<h1>Giac/Xcas in your browser!</h1>
<b>Examples of input:</b>
<ul>
  <li> Algebra :
  <tt> factor(x^4-1); cfactor(x^2+1); normal((x+1)^4)
    <br> simplify(sin(3x)/sin(x)); gcd(x^4-1,x^3-1) </tt>
  </li>
  <li> Solve equations :
    <tt> solve(x^2-3*x+2=0); csolve(x^2=2*i);
  solve([x+y=1,x-y=3],[x,y]) </tt>
  </li>
  <li>Calculus :
    <tt> f(x):=sin(x^2):; f(sqrt(pi)); f'(2); f'(y) 
    <br> int(1/(x^4-1)); int(1/(x^4+1)^4,x,0,+infinity) 
  <br> limit(sin(x)/x,x=0); series(sin(x),x=0,5);</tt>
  </li>
  <li> Linear algebra :
    <tt> A:=[[1,2],[3,4]]; inv(A); det(A-x*idn(A)); A[0,0]; rref(A);
  eigenvalues(A); eigenvectors(A);</tt>
  </li>
  <li> Plots (you can change the viewpoint for 3d graphs with arrows
  keys, press q to leave interactive mode):
  <tt>plot([sin(x),x-x^3/3!],x=-3..3,color=[red,blue])
  <br> plotfunc(x^2-y^2,[x=-2..2,y=-2..2]); plane(z=0,color=cyan+filled);
  </tt>
  </ul>
  More <a href="http://www-fourier.ujf-grenoble.fr/~parisse/giac/doc/en/cascmd_en">documentation</a>.
  Giac/Xcas, (c) B. Parisse, R. De Graeve, Institut Fourier,
Universit√© de Grenoble I., licensed under the GPL3, for commercial
licenses contact us.
  <hr>
  <form onsubmit="setTimeout(function() {
caseval = Module.cwrap('_ZN4giac7casevalEPKc', 'string', ['string']);    
Module.print(entree.value);
var res = caseval(entree.value);
Module.print('  '+res);
 var keyboardListeningElement = Module['keyboardListeningElement'];
}); 
		  return false">
    Input: <input type="text" name="entree" value="factor(x^4-1)" size=100>
    <input type="submit" value="Go!">
  </form>

    <hr/>
    <div class="emscripten" id="status">Downloading...</div>
    <div class="emscripten">
      <progress value="0" max="100" id="progress" hidden=1></progress>  
    </div>
    <hr/>
    <textarea class="emscripten" id="output" rows="8"></textarea>
    <!--- <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()"></canvas> --->
    <hr/>

    <hr>
<canvas id='canvas' width=600 height=50></canvas>

  <script type='text/javascript'>
      // connect to canvas
      var Module = {
        preRun: [],
        postRun: [],
        print: (function() {
          var element = document.getElementById('output');
          element.value = ''; // clear browser cache
          return function(text) {
            // These replacements are necessary if you render to raw HTML
            //text = text.replace(/&/g, "&amp;");
            //text = text.replace(/</g, "&lt;");
            //text = text.replace(/>/g, "&gt;");
            //text = text.replace('\n', '<br>', 'g');
            element.value += text + "\n";
            element.scrollTop = 99999; // focus on bottom
          };
        })(),
        printErr: function(text) {
          if (0) { // XXX disabled for safety typeof dump == 'function') {
            dump(text + '\n'); // fast, straight to the real console
          } else {
            console.log(text);
          }
        },
        canvas: document.getElementById('canvas'),
        setStatus: function(text) {
          if (Module.setStatus.interval) clearInterval(Module.setStatus.interval);
          var m = text.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/);
          var statusElement = document.getElementById('status');
          var progressElement = document.getElementById('progress');
          if (m) {
            text = m[1];
            progressElement.value = parseInt(m[2])*100;
            progressElement.max = parseInt(m[4])*100;
            progressElement.hidden = false;
          } else {
            progressElement.value = null;
            progressElement.max = null;
            progressElement.hidden = true;
          }
          statusElement.innerHTML = text;
        },
        totalDependencies: 0,
        monitorRunDependencies: function(left) {
          this.totalDependencies = Math.max(this.totalDependencies, left);
          Module.setStatus(left ? 'Preparing... (' + (this.totalDependencies-left) + '/' + this.totalDependencies + ')' : 'All downloads complete.');
        }
      };
      Module.setStatus('Downloading...');
    </script>      
  <script src="giac.js"></script>

  <br>
This is a demo interface to a full web-based CAS engine.
This CAS does not need any server,
all the computations are done locally with the javascript
engine of your browser (requires Firefox version 19 or later,
or Chrome, the latest version of Firefox is recommended).
The code of the CAS is 10M, it is downloaded once
(giac.js and giac.js.mem, javascript 
  compiled from native <a href="http://www-fourier.ujf-grenoble.fr/~parisse/giac/emgiac.tgz">Giac/Xcas</a> by emscripten).
  The javascript code is at least 2 times slower than the native 
code, and sometimes much much slower (e.g. more than 100 times slower
for computing a Groebner basis like cyclic7). Most of the time
it is however fast enough (that would justify a better interface...),
but it is recommended to run large computations with
  <a href="http://www-fourier.ujf-grenoble.fr/~parisse/giac.html">Xcas</a>!
<br>

</body>
</html>

